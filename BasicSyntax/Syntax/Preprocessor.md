# 전처리기
- C++은 빌드되는 과정에서 여러 작업을 거친다. 그 중 전처리기는 컴파일되기 전에 처리되는 작업이다.
- 전처리기는 소스 파일의 코드를 간단히 하는데 목적을 뒀다.
- 모든 전처리문은 `#`으로 시작하며 세미콜론이 붙지 않는다.
## include
- 외부 코드를 가져온다. 엄밀히 말하면 외부 라이브러리(헤더 파일)를 포함한다는 의미이다.

```cpp
#include "library"
```

- `#include <library>`의 형태로도 많이 사용되는데, 라이브러리 이름에 양쪽 끝에 `""`가 오면 현재 위치로부터 라이브러리를 찾는 것이고 `<>`가 오면 내부적으로 정해놓은 위치에서 라이브러리를 찾는 것을 의미한다.

### 라이브러리
- 라이브러리란 복잡한 구조나 처리가 필요한 코드는 미리 작업하여 여러 다른 개발자에게 제공하는 함수나 변수들의 집합이다.
- 라이브러리를 통해 코드를 효율적이고 쉽게 사용할 수 있어 프로그램에 라이브러리는 필수적이다.
- C++의 대표적인 라이브러리로 아래와 같은 것들이 있다.

```cpp
iostream: 입출력을 다루는 라이브러리
vector: vector라는 자료 구조를 다루는 라이브러리
queue: queue라는 자료 구조를 다루는 라이브러리
stack: stack이라는 자료 구조를 다루는 라이브러리
map: map이라는 자료 구조를 다루는 라이브러리
...
```

- 라이브러리는 그 종류와 형태가 다양하다. 기본적으로 헤더 파일(.h)이나 동적 링크 라이브러리(.dll)와 같은 다양한 형태로 존재한다.
### 상대 경로와 절대 경로
- include는 사용자가 직접 만든 라이브러리도 포함시킬 수 있다. 이때 해당 라이브러리의 경로가 필요한데 두 가지 형태가 있다.
#### 절대 경로
- 최상위 경로로부터 시작하여 위치를 표시하는 방법이다. 하지만 절대 경로는 명시되는 디렉토리와 구조가 일치해야 한다는 단점이 있다.
#### 상대 경로
- 현재 경로로부터 위치를 표시하는 방법이다.
- 프로젝트 폴더 내에 외부 라이브러리와 소스 코드를 한 곳에 모아 상대 경로로 작성하여 프로젝트를 복사해 다른 외부 환경에서도 오류없이 실행될 수 있다는 장점이 있다.
- 대부분 코드 내에서 직접 만든 라이브러리는 이러한 상대 경로로 작성하여 포함시킨다.
## 매크로
- 코드의 가독성을 높이기 위해 사용된다. 실제 전처리 과정에서는 이러한 기능이 치환과 다를게 없다.
- 매크로는 아래와 같은 형태를 가진다.

```cpp
#define ... ...
```

### 매크로 상수
- 상수에 이름을 부여한다.

```cpp
#define PI 3.141592
```

- 전처리 과정에서 코드 내에 작성된 모든 PI라는 매크로 상수는 3.141592라는 값으로 치환된다.
- 매크로 상수는 상수를 생략해도 되지만 상수로써의 역할로 사용되지 않는다.

```cpp
#define NAME
```

### 매크로 함수
- 실제 함수가 아니며 함수처럼 사용되는 매크로이다.

```cpp
#define SQUARE(x) (x*x)
```

- 매크로 함수 이름과 괄호, 타입이 명시되지 않은 변수와 공백으로 구분된 연산식 또는 코드로 작성된다.
- SQUARE라는 매크로 함수는 x*x라는 코드로 치환된다.
- 코드부에 괄호는 생략해도 되지만 사용하는 것이 좋다.

```cpp
SQUARE(2)
```
## 조건부 컴파일
- 컴파일될 때 코드 일부분을 선택적으로 컴파일할 수 있게 하는 전처리문이다.
### if
- `#if 조건식`의 형태로 쓰이며 조건식에는 비교 연산과 매크로 상수 또는 상수가 와야한다.
- 기능 자체는 조건문의 if문과 같으며 코드 실행 대신 코드를 컴파일할지를 정한다.
### elif
- `#elif 조건식`의 형태로 쓰인다. 마찬가지로 기능 자체는 조건문의 else if문과 같으며 코드 실행 대신 코드를 컴파일할지를 정한다.
### else
- `#else`의 형태로 쓰이며 기능은 마찬가지로 else문과 같다. 코드 실행 대신 코드를 컴파일할지를 정한다.
### ifdef
- `#ifdef 매크로이름`의 형태로 쓰이며 조건식 대신 매크로 이름이 온다. 매크로 이름은 매크로 상수나 상수없이 정의된 매크로의 이름을 말한다.
- 해당 매크로 이름이 정의되어 있다면 아래 코드를 컴파일 한다는 의미를 가진다.
### ifndef
- ifdef의 반대로 매크로 이름이 정의되어 있지 않았다면 아래 코드를 컴파일 한다는 의미를 가진다.
### endif
- if와 ifdef, ifndef의 범위를 정하는데 쓰이며 항상 와야 한다.

```cpp
# define VAR 0
#if VAR == 0
...
#elif VAR == 1
...
#else
...
#endif
```

```cpp
#ifdef MACRO
...
#endif
```